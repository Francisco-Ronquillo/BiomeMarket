{% load static %}
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crear Cuenta - BioMarket</title>
  <link rel="stylesheet" href="{% static 'css/signup.css' %}">
</head>
{% block content %}
<body>
  <div class="signup-container">
    <!-- Izquierda: logo / mensaje -->
    <aside class="signup-left">
      <div class="overlay">
        <div class="logo">
          <img src="{% static 'img/logo.png' %}" alt="Logo BioMarket">
        </div>
        <h2>Únete a BioMarket</h2>
        <p>Compra y vende productos agrícolas frescos.</p>
        <ul class="benefits">
          <li>✓ Catálogo variado</li>
          <li>✓ Envíos rápidos</li>
          <li>✓ Precios competitivos</li>
        </ul>
        <p class="login-text">¿Ya tienes cuenta? <a href="{% url 'accounts:signin' %}">Inicia Sesión</a></p>
      </div>
    </aside>

    <!-- Derecha: formulario -->
    <main class="signup-right">
      <form method="post" class="form-container" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <div class="regresar">
          <a href="{% url 'productos:home' %}" class="boton-recuperar">←</a>
        </div>

        <h1>CREAR CUENTA</h1>
        <p class="subtitle">Completa los datos para registrarte</p>

        <div class="grid-row">
          <div class="field">
            {{ form.nombre.label_tag }}
            {{ form.nombre }}
            {{ form.nombre.errors }}
          </div>
          <div class="field">
            {{ form.apellido.label_tag }}
            {{ form.apellido }}
            {{ form.apellido.errors }}
          </div>
        </div>

        <div class="field">
          {{ form.email.label_tag }}
          {{ form.email }}
          {{ form.email.errors }}
        </div>

        <div class="field">
          {{ form.telefono.label_tag }}
          {{ form.telefono }}
          {{ form.telefono.errors }}
        </div>

        <div class="field">
          {{ form.direccion.label_tag }}
          {{ form.direccion }}
          {{ form.direccion.errors }}
        </div>

        <div class="grid-row">
          <div class="field">
            {{ form.contraseña.label_tag }}
            {{ form.contraseña }}
            {{ form.contraseña.errors }}
          </div>

          <div class="field">
            {{ form.confirmar_contraseña.label_tag }}
            {{ form.confirmar_contraseña }}
            {{ form.confirmar_contraseña.errors }}
          </div>
        </div>

        <div class="full-width">
          <button type="submit" class="btn">Crear</button>
        </div>
      </form>
    </main>
  </div>

  <script>
    // Desvanecer errores automáticamente
    setTimeout(() => {
      document.querySelectorAll('.errorlist').forEach(el => {
        el.classList.add('fade-out');
        setTimeout(() => el.style.display = 'none', 600);
      });
    }, 4000);

    // Si hay campo para mostrar campos de productor (opcional)
    const prodToggle = document.querySelector('[name="es_productor"], [id="id_es_productor"]');
    const producerFields = document.getElementById('producerFields');
    if (prodToggle && producerFields) {
      const update = () => producerFields.style.display = (prodToggle.checked ? 'block' : 'none');
      prodToggle.addEventListener('change', update);
      update();
    }
  </script>
</body>
{% endblock %}
</html>
